<div class="daily-list-container">
  <h2>Dailies</h2>

  <button
    mat-raised-button
    color="primary"
    [routerLink]="['/dailies/create']"
    *ngIf="authService.hasRole('PROFESSOR')"
  >
    <mat-icon>add</mat-icon>
    Registrar Nova Daily
  </button>

  <br><br>

  <mat-divider></mat-divider>

  <br>

  <mat-form-field appearance="fill" style="width: 300px;">
    <mat-label><mat-icon>filter_list</mat-icon> Filtrar por Aluno</mat-label>
    <mat-select [(ngModel)]="selectedStudentId" (selectionChange)="filterByStudent()">
      <mat-option [value]="null">Todos os alunos</mat-option>
      <mat-option *ngFor="let student of students" [value]="student.id">
        {{ student.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <div *ngIf="dailies.length > 0; else noDailiesFound" class="daily-grid">
    <mat-card *ngFor="let daily of dailies" class="daily-card">
      <mat-card-header>
        <mat-card-title>
          Daily de {{ daily.alunoNome || "Aluno" }}
        </mat-card-title>
        <mat-card-subtitle>
          Data: {{ daily.annotationDate | date: "dd/MM/yyyy" }}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p><strong>Descrição:</strong><br />{{ daily.annotationText }}</p>
      </mat-card-content>

      <mat-card-actions *ngIf="authService.hasRole('PROFESSOR')">
        <button
          mat-raised-button
          color="accent"
          [routerLink]="['/dailies/edit', daily.id]"
        >
          <mat-icon>edit</mat-icon> Editar
        </button>
        <button
          mat-raised-button
          color="warn"
          (click)="confirmDeleteDaily(daily.id!)"
        >
          <mat-icon>delete</mat-icon> Excluir
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <ng-template #noDailiesFound>
    <div class="no-items-message">
      Nenhuma daily encontrada. Comece adicionando uma nova!
    </div>
  </ng-template>
</div>